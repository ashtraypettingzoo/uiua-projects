# Experimental!
# Uiua 0.13.0-dev.2
# https://github.com/ashtraypettingzoo/uiua-projects/blob/main/Wavetables/wavetables.ua
# https://uiua.org/pad?src=0_13_0-dev_2__IyBFeHBlcmltZW50YWwhCiMgVWl1YSAwLjEzLjAtZGV2LjIKIyBodHRwczovL2dpdGh1Yi5jb20vYXNodHJheXBldHRpbmd6b28vdWl1YS1wcm9qZWN0cy9ibG9iL21haW4vV2F2ZXRhYmxlcy93YXZldGFibGVzLnVhCiMgW3VybF0KCiMgVE9ETzogaGlnaC9sb3cgcGFzcyBmaWx0ZXJzCiMgVE9ETzogSVIgaW1wb3J0aW5nCiMgVE9ETzogZml4IFN0ciAoc3RyZXRjaCkgYnV6emluZwojIFRPRE86IFNpZCAoc2lkZSBieSBzaWRlKQojIFRPRE86IFNocCAod2F2ZXNoYXBlKQojIFRPRE86IEVycm9yIGhhbmRsaW5nCiMgVE9ETzogQmF0Y2ggcHJvY2Vzc2luZwoKUyDihpAgMjA0OCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgU2FtcGxlcyBwZXIgb3NjaWxsYXRvcgpPIOKGkCAyNTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBPc2NpbGxhdG9ycyBwZXIgdGFibGUKVCDihpAgw5dTIE8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFNhbXBsZXMgcGVyIHRhYmxlClNVIOKGkCDDtzIrMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBTaWduZWQgdG8gdW5zaWduZWQKVVMg4oaQIC0xw5cyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFVuc2lnbmVkIHRvIHNpZ25lZApPVSDihpAgw7fin5zih6FTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE9zY2lsbGF0b3IgYmFzZSwgdW5zaWduZWQgMC0xCk9UIOKGkCDDl8-ET1UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgT3NjaWxsYXRvciBiYXNlLCB0cmlnb25vbWV0cmljIDAtMs-AClIg4oaQIOKGr8KkVCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE9zY2lsbGF0b3IgdG8gdGFibGUgKHJlcGVhdCkKVSDihpAg4o2lKOKKouKNieKGr-KKnzrin5zDtzLiirjip7spICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBPY3RhdmUgdXAgKGZvciBwbGF5YmFjayBvbmx5KQpHSCDihpAgMjAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBHcmFwaCBoZWlnaHQKQyDihpAg4oalwq8x4oanMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDbGFtcApTVyDihpAg4oqP4pe_4qe7LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBTZWxlY3QgKHdyYXBwZWQpClNJIOKGkCAr4oqZw5fin5wt4oqD4oqDKFNX4oyKKShTV-KMiCkoLeKKuOKMiikgICAgICAgICAgICAgICAgICAgICMgU2VsZWN0IChpbnRlcnBvbGF0ZWQpClJJIOKGkCBTScOX4oehOsO3LOKnuywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFJlc2l6ZSAoaW50ZXJwb2xhdGVkKQpDUyDihpAg4oi_K863ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDb3NpbmUKTlIg4oaQIOKGp-KKuOKGpSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTmFOIHJlcGxhY2UKU0Mg4oaQIE5SMcO34p-c4oi_ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBTaW5jClZCIOKGkCDDty0x4p-c4oehTyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgVmFsdWUgYmFzZQpWUiDihpAgK-KKmcOXOi3in5w6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFZhbHVlIHJhbmdlIFttaW4sIG1heCwgdmFsdWVzXQpHTCDihpAgMTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBHSUYgbGVuZ3RoIChmcmFtZXMpClNIIOKGkCAyMDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFNwZWN0cnVtIGdyYXBoIGhlaWdodApGViDihpAgw7cy4oiaUyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBGb3VyaWVyIG1heCB2YWx1ZQpTViDihpAgKzHijIrDl8O3MlPigb8yw7fin5zih6HDtzRTICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBTcGVjdHJ1bSBpbmRleCB2YWx1ZXMKSVMg4oaQIOKorCgmZ2lmczE1fCZpbXMpPTLip7vilrMuICAgICAgICAgICAgICAgICAgICAgICMgU2hvdyBpbWFnZSBvciBnaWYKU00g4oaQIOKHjOKIpyjiioIr4oq44oqD4ouF4oiYKMOX4oqZ4ouF4oqiKSniipkoOsKkwrDiioIpICAgICAgICAgICAgICAgICAgICMgU2NhbiBhZGQgKyBtdWx0aXBseQpNQiDihpAgw7c6MeKBvzE2IDIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBNaW5pbXVtIDE2LWJpdCB2YWx1ZQpGVCDihpAg4oqDKOKIoMKw4oSCKSjDt0ZW4oy1KeKGmSsxw7cyUyBmZnQgICAgICAgICAgICAgICAgICAgICMgRm91cmllciB0cmFuc2Zvcm0gW3BoYXNlLCBhbXAg4oaQIHdhdmVdCkZVIOKGkCDil4zCsOKEgsKwZmZ04oqCOuKNnMKw4oSCwq_ihpgx4oeM4oaYMS7ihILiioMow5fiiL8pKMOXQ1Mp4oqZKMOXRlYpICAgICAgIyBGb3VyaWVyIHVudHJhbnNmb3JtIFt3YXZlIOKGkCBwaGFzZSwgYW1wXQpEUyDihpAgfDEg4o2lKOKKgjoiLyIpPjDip7suICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBBZGQgc2xhc2ggdG8gZGlyZWN0b3J5IG5hbWUKQ0cg4oaQIOKNouKKoig9MeKnuyniiaEo4oeM4qyaMeKKnuKJoOKHoUdI4oGFw5ctMUdIIFNVIFUyQynilr09MOKHoeKMisO3R0wgTyAjIENyZWF0ZSBncmFwaApUcnVlIOKGkCAxICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBUcnVlIGNvbnN0YW50CkZhbHNlIOKGkCAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEZhbHNlIGNvbnN0YW50ClLigoAg4oaQIOKYhzAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBSZXJhbmsgemVybwpS4oKBIOKGkCDimIcxICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgUmVyYW5rIG9uZQpWISDihpAgUuKCgeKJoV4hUuKCgApWViEg4oaQIFLigoHiiaFeIVLigoDiiplS4oKAClZWQSEg4oaQIFLigoHiiaFeIVLigoDiiplS4oKA4oqZ4oqZUuKCgQpWQSEg4oaQIFLigoHiiaFeIVLigoDiiplS4oKBClZBQSEg4oaQIFLigoHiiaFeIVLigoDiiplS4oKB4oqZ4oqZUuKCgQpBISDihpAgUuKCgeKJoV4hUuKCgQpBQSEg4oaQIFLigoHiiaFeIVLigoHiiplS4oKBCgojIC0tLS0gQ29udm9sdXRpb25zCiMgSWRlbnRpdHkgKGRlbHRhKSBjb252b2x1dGlvbgpDSWQg4oaQIMKkwqQxCgojIC0tLS0gVGFibGUgdmFsdWVzCiMgVmFsdWVzIChsaW5lYXIpIFttaW4sIG1heF0KVmFsIOKGkCBWUuKKmeKKmShWQikKIyBWYWx1ZXMgKHBvd2VyIGluKSBbbWluLCBtYXgsIGJhc2VdClZhbFBJIOKGkCBWUuKKmeKKmSjigb86VkIpCiMgVmFsdWVzIChwb3dlciBvdXQpIFttaW4sIG1heCwgYmFzZV0KVmFsUE8g4oaQIOKHjFZhbFBJOgoKIyAtLS0tIEhlbHBlcnMKIyBSYW5kb20gKG1pbi1tYXgpIFtNaW4sIE1heF0KUm5kIOKGkCArw5fimoI64p-cLQojIFJhbmRvbSAobWluLW1heCkgW01pbiwgTWF4XQpSbmRJIOKGkCDijIpSbmQ6KzE64o2lOjwsLAoKIyAtLS0tIFdhdmUgT3BlcmF0aW9ucwojIFN1bSBbe1dhdmVzL1RhYmxlc31dClN1bSDihpAgwrDilqEvK-KNmlLigoEKIyBBdmVyYWdlIFt7V2F2ZXMvVGFibGVzfV0KQXZnIOKGkCBTdW3Dt-KKuOKnuwojIEFtcGxpZnkgW0Ftb3VudCwgV2F2ZS9UYWJsZV0KQW1wIOKGkCBWQSHDlwojIE1heGltaXplIFtXYXZlL1RhYmxlXQpNYXgg4oaQIEEhKOKXjOKNpeKfnMO34omgMC7ihqXiiKkv4oal4p-cwq8uKQojIFBoYXNlIHNoaWZ0IFtBbW91bnQsIFdhdmUvVGFibGVdClBocyDihpAgVkEhKOKGu-KBhcOX4qe7LCkKIyBQaGFzZSBzaGlmdCB0byB6ZXJvIHBvaW50IFtXYXZlL1RhYmxlXQpaZXIg4oaQIEEhKOKGu-KKly_ihqfijLUuLikKIyBCaXRjcnVzaCBbQW1vdW50ICgwLTEpLCBXYXZlL1RhYmxlXQpCaXQg4oaQIFZBIShVU-KGpzHDty0xOuKMisOXLFNVOuKBheKBvzoyKzHDlzE1LTox4oia4oanMeKGpTApCiMgUmV2ZXJzZSBbV2F2ZS9UYWJsZV0KUmV2IOKGkCBBIeKHjAojIEludmVydCBbV2F2ZS9UYWJsZV0KSW52IOKGkCBBIcKvCiMgTWlycm9yIDFzdCBoYWxmIFtXYXZlL1RhYmxlXQpNaXIg4oaQIEEhKOKKguKHjC7ihpnDtzJTKQojIEZhZGUgc3RhcnQgJiBlbmQgW0Ftb3VudCAoMC0xKSwgV2F2ZS9UYWJsZV0KRmFkIOKGkCBWQSEo4oeM4qyaMcOX4oeMOuKsmjHin5zDl8O34qe7LuKHoeKMisO3MsOXU-KGpTApCiMgQ3Jvc3NmYWRlIFtBbW91bnQgKDAtMSksIFN0YXJ0IFdhdmUvVGFibGUsIEVuZCBXYXZlL1RhYmxlXQpDcnMg4oaQIFZBQSEoK-KKmSjDly06MSk64p-cw5fiipk6KQojIFN0cmV0Y2ggW1RvICgwLTEpLCBGcm9tICgwLTEpLCBXYXZlL1RhYmxlXQpTdHIg4oaQIFZWQSEo4oqC4oqZUkk6LTpT4p-cUkniipniioPihpnihpjiiKko4oanLTFT4oalMeKBhcOXU-KGpzHihqUwKSkKIyBTaGlmdCB1cC9kb3duIFtBbW91bnQgKMKvMS0xKSwgV2F2ZS9UYWJsZV0KU2hmIOKGkCBWQSEoKykKIyBTbGljZSBbQW1vdW50ICgwLTEpLCBXYXZlL1RhYmxlXQpTbGMg4oaQIFZBIShSSSBT4oav4pmt4oGF4oalMcOXUykKIyBTcGVlZCB1cC9kb3duIFtPY3RhdmVzLCBXYXZlL1RhYmxlXQpTcGQg4oaQIFZBIShTbGPigb86MikKIyBTcGxpY2UgW0Ftb3VudCAoMC0xKSwgV2F2ZS9UYWJsZSAxLCBXYXZlL1RhYmxlIDJdClNwbCDihpAgVkFBISjiioLiipPihpnihpjin5w64oGFw5dT4oanMeKGpTApCiMgQ2xpcApDbHAg4oaQIEEhKEMpCiMgV3JhcCBbV2F2ZS9UYWJsZV0KV3JwIOKGkCBBIShVU-KXvytNQjFTVSkKIyBBbXBsdXR1ZGUgbW9kdWxhdGlvbiBbQW1wbGl0dWRlLCBNb2R1bGF0b3IsIENhcnJpZXJdCkFNIOKGkCBWQUEhKMOXKzHDtzLDly0xOikKIyBSaW5nIG1vZHVsYXRpb24gW01vZHVsYXRvciwgQ2Fycmllcl0KUk0g4oaQIEFBIcOXCiMgRnJlcXVlbmN5IG1vZHVsYXRpb24gW0FtcGxpdHVkZSwgTW9kdWxhdG9yLCBDYXJyaWVyXQpGTSDihpAgVkFBIShTScOXUytPVcOXKQojIENvbnZvbHZlIFtJbXB1bHNlLCBXYXZlL1RhYmxlXQpDbnYg4oaQIEFBISgvK8OX4o2J4per4oqZKOKGr-KZrSk6LTHiirgr4qe7LOKnu-KfnDopCiMgUGhhc2UgcmFuZG9taXplIFtBbW91bnQgKDAtMSksIFdhdmUvVGFibGVdClBociDihpAg4omhKEZVOuKKmSs6RlQpOuKJocOXUuKCgS3PgMOXz4TijaUo4oqC4pqCKSsxw7cyU1tdUuKCgOKKmVLigoEKIyBIYXJtb25pYyB3YXZlIGZpbHRlciBbQW1vdW50ICgwLTEpLCBGaWx0ZXIgV2F2ZS9UYWJsZSwgU291cmNlIFdhdmUvVGFibGVdCkh3ZiDihpAgVkFBIShGVeKKmcOXOisxw5fiipkoLTHil4ziiKlGVCkpCiMgRG93bnNhbXBsZSBbQW1vdW50ICgwLTEpLCBXYXZlL1RhYmxlXQpEd24g4oaQIFZBISgKICDijIjDtzpTLuKBheKGpTHigb86Misxw5ctMeKCmTJTLToxCiAg4oavwqRT4o2J4oav4p-cw7fin5wo4omhLyvihq_iioI6KQopCgojIC0tLS0gVGFibGUgb3BlcmF0aW9ucwojIENvbWIgZmlsdGVyIChmZWVkYmFjaykgW0FtcGxpdHVkZSwgSGFybW9uaWMsIFRhYmxlXQpUQ21iIOKGkCDihq9PX1MgU03iipko4qyaMOKGr-KKguKMiMO3OlQu4oGFw7c6U-KKmVIpCiMgQ29tYiBmaWx0ZXIgKGZlZWRmb3J3YXJkKSBbQW1wbGl0dWRlLCBIYXJtb25pYywgVGFibGVdClRDbWYg4oaQIOKGr09fUyvDl-KKmSjiioLihq86WzBdwqTin5zihpjijIrDtzrCr1PiipkoLlIpKQoKIyAtLS0tIFdhdmVmb3JtcwojIFNpbmUgd2F2ZSBbSGFybW9uaWNdClNpbiDihpAgViEo4oi_w5c6T1QpCiMgU2F3IHdhdmUgW0hhcm1vbmljXQpTYXcg4oaQIFYhKFVT4pe_McOXOk9VKQojIFRyaWFuZ2xlIHdhdmUgW0hhcm1vbmljXQpUcmkg4oaQIFYhKFVT4oy1VVPil78xKzAuMjXCr8OXOk9VKQojIFB1bHNlIHdhdmUgW0hhcm1vbmljLCBEdXR5XQpQdWwg4oaQIFZWIShVU-KJpFVTOlNhdykKIyBTcXVhcmUgd2F2ZSBbSGFybW9uaWNdClNxciDihpAgViEoUHVsOjAuNSkKIyBOb2lzZSB3YXZlIFtdCk5zdyDihpAgKOKYhzFVU-KNpSjiioLimoIpU1tdKQoKIyAtLS0tIFRhYmxlcwojIE5vaXNlIHRhYmxlIFtdCk5zdCDihpAgKOKNpSjiioJOc3cpT1tdKQoKIyAtLS0tIFNldHRpbmdzCkRlc2t0b3Ag4oaQIEZhbHNlCkluRGlyQXVkaW8g4oaQICJpbiIKSW5EaXJJbWFnZSDihpAgImluIgpPdXREaXJBdWRpbyDihpAgIm91dCIKT3V0RGlySW1hZ2Ug4oaQICJvdXQiCk91dERpckdyYXBoIOKGkCAib3V0IgpPdXREaXJTcGVjdHJ1bSDihpAgIm91dCIKT3V0U3VmZml4SW1hZ2Ug4oaQICIiCk91dFN1ZmZpeEdyYXBoIOKGkCAiZyIKT3V0U3VmZml4U3BlY3RydW0g4oaQICJzIgoKIyAtLS0tIFV0aWxpdHkKUHJpbnQg4oaQICZwZgpFeHBvcnQg4oaQICZhcCBD4pmtClRlc3Qg4oaQICZhcCBVM1IgQ-KZrQpHcmFwaCDihpAgSVMgQ0cKSW1hZ2Ug4oaQICZpbXPihq9PX1MgU1UgUiBD4pmtCkltcG9ydEltYWdlIOKGkCBSSSBP4omhUkkgU-KNnOKNieKJoSjDtzMvK-KGmTMp4peMwrBpbWcmZnJhYuKNpSjiioJEUyBJbkRpckltYWdlKURlc2t0b3AKSW1wb3J0V2F2ZSDihpAgUuKCgSBSSSBT4peM4peMwrBhdWRpbyZmcmFi4o2lKOKKgkRTIEluRGlyQXVkaW8pRGVza3RvcApJbXBvcnRUYWJsZSDihpAg4oavT19TIFJJIFTil4zil4zCsGF1ZGlvJmZyYWLijaUo4oqCRFMgSW5EaXJBdWRpbylEZXNrdG9wICMgSW1wb3J0IDI1Ni13YXZlIHRhYmxlClRhYmxlQXZlcmFnZSDihpAgUuKCgcO3Ty8r4oavT19TICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBUYWJsZSB0byB3YXZlIFtUYWJsZV0KVGFibGVJbmRleCDihpAgUuKCgeKKoeKGpy0xT-KGpTDigYU64oavT19TOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBUYWJsZSB0byB3YXZlIFtJbmRleCAoMC0yNTUpLCBUYWJsZV0KSW1hZ2VUb1RhYmxlIOKGkCBVUwpHcmFwaENvbnYg4oaQIEdyYXBoIEEhKOKsmjDDl-KGr1MxKQpHcmFwaFNwZWN0cnVtIOKGkCBJU-KNouKKoig9MeKnuyniiaEo4oeM4oqe4omlw7dTSOKHoVNI4oqPU1bDt0ZW4oaZw7cyU-KMtWZmdCnilr09MOKHoeKMisO3R0wgTwpHcmFwaFNwZWN0cnVtRnVsbCDihpAgSVPijaLiiqIoPTHip7sp4omhKOKHjOKKnuKJpcO3U0jih6FTSMO3RlbijLVmZnQp4pa9PTDih6HijIrDt0dMIE8KV3JpdGVBdWRpbyDihpAgJmZ3YeKNpSjiioJEUyZmbWQuT3V0RGlyQXVkaW8pRGVza3RvcOKKguKKmSgiLndhdiJhdWRpbyJ3YXYiJmFzckPima0pCldyaXRlSW1hZ2Ug4oaQICgKICDiioLiipko4oqCT3V0U3VmZml4SW1hZ2UiLnBuZyJpbWcicG5nIuKItVsuLjoxXeKGr09fUyBTVSBSIEPima0pCiAgJmZ3YeKNpSjiioJEUyZmbWQuT3V0RGlySW1hZ2UpRGVza3RvcCkKV3JpdGVHcmFwaCDihpAgKAogIOKNpSjiioJEUyZmbWQuT3V0RGlyR3JhcGgpRGVza3RvcOKKgjpPdXRTdWZmaXhHcmFwaOKKmSg-M-Knu-KWsy7iiLVbLi46MV1DRykKICAmZndh4qisKOKKgjoiLnBuZyLiipkoaW1nInBuZyIpfOKKgjoiLmdpZiLiipkoZ2lmMTYpKToKKQpXcml0ZVNwZWN0cnVtIOKGkCAoCiAg4oqZKOKNouKKoig9MeKnuyniiaEo4oeM4oqe4omlw7dTSOKHoVNI4oqPU1bDt0ZW4oaZw7cyU-KMtWZmdCnilr09MOKHoeKMisO3R0wgTykKICDijaUo4oqCRFMmZm1kLk91dERpclNwZWN0cnVtKURlc2t0b3DiioI6T3V0U3VmZml4U3BlY3RydW3iipkoPjPip7vilrMu4oi1Wy4uOjFdKQogICZmd2HiqKwo4oqCOiIucG5nIuKKmShpbWcicG5nIil84oqCOiIuZ2lmIuKKmShnaWYxNikpOgopCldyaXRlU3BlY3RydW1GdWxsIOKGkCAoCiAg4oqZKOKNouKKoig9MeKnuyniiaEo4oeM4oqe4omlw7dTSOKHoVNIw7dGVuKMtWZmdCnilr09MOKHoeKMisO3R0wgTykKICDijaUo4oqCRFMmZm1kLk91dERpclNwZWN0cnVtKURlc2t0b3DiioI6T3V0U3VmZml4U3BlY3RydW3iipkoPjPip7vilrMu4oi1Wy4uOjFdKQogICZmd2HiqKwo4oqCOiIucG5nIuKKmShpbWcicG5nIil84oqCOiIuZ2lmIuKKmShnaWYxNikpOgopCkV4aXQg4oaQIOKNpSgmZXhpdDApRGVza3RvcAoKIyAtLS0tIFNhbXBsZSB3YXZlZm9ybXMvd2F2ZXRhYmxlcwpXYXZl4oKBIOKGkCBBdmd7U2luMyBBbXAwLjdTaW4yIFNpbjF9CldhdmXigoIg4oaQIEFNMC40U2luNyBBTTAuNVNpbjIgU2luMQpXYXZl4oKCIOKGkCBBdmd7U2F3MSAoUHVsIDIgMC4yKX0KV2F2ZeKChCDihpAgQml0MC43IEZNMC4xU2luNyBTaW4xClRibOKCgSDihpAgRk0oVmFsIDAgMSkgU2luMiBTaW4xClRibOKCgiDihpAgTWF4IEF2Z3tBbXAoVmFsIDAgMSlTaW4yIFNpbjF9ClRibOKCgyDihpAgQml0KFZhbCAwIDEpIENycyhWYWxQSSAwIDEgMikgU2luMSBTaW4zCgpQcmludCAiVGJs4oKDIgpUZXN0IFRibOKCgwpJbWFnZSBUYmzigoMKR3JhcGggVGJs4oKDCkdyYXBoU3BlY3RydW0gVGJs4oKDCgpFeGl0Cg==

# TODO: high/low pass filters
# TODO: IR importing
# TODO: fix Str (stretch) buzzing
# TODO: Sid (side by side)
# TODO: Shp (waveshape)
# TODO: Error handling
# TODO: Batch processing

S ← 2048                                       # Samples per oscillator
O ← 256                                        # Oscillators per table
T ← ×S O                                       # Samples per table
SU ← ÷2+1                                      # Signed to unsigned
US ← -1×2                                      # Unsigned to signed
OU ← ÷⟜⇡S                                      # Oscillator base, unsigned 0-1
OT ← ×τOU                                      # Oscillator base, trigonometric 0-2π
R ← ↯¤T                                        # Oscillator to table (repeat)
U ← ⍥(⊢⍉↯⊟:⟜÷2⊸⧻)                              # Octave up (for playback only)
GH ← 200                                       # Graph height
C ← ↥¯1↧1                                      # Clamp
SW ← ⊏◿⧻,                                      # Select (wrapped)
SI ← +⊙×⟜-⊃⊃(SW⌊)(SW⌈)(-⊸⌊)                    # Select (interpolated)
RI ← SI×⇡:÷,⧻,                                 # Resize (interpolated)
CS ← ∿+η                                       # Cosine
NR ← ↧⊸↥                                       # NaN replace
SC ← NR1÷⟜∿                                    # Sinc
VB ← ÷-1⟜⇡O                                    # Value base
VR ← +⊙×:-⟜:                                   # Value range [min, max, values]
GL ← 16                                        # GIF length (frames)
SH ← 200                                       # Spectrum graph height
FV ← ÷2√S                                      # Fourier max value
SV ← +1⌊×÷2Sⁿ2÷⟜⇡÷4S                           # Spectrum index values
IS ← ⨬(&gifs15|&ims)=2⧻△.                      # Show image or gif
SM ← ⇌∧(⊂+⊸⊃⋅∘(×⊙⋅⊢))⊙(:¤°⊂)                   # Scan add + multiply
MB ← ÷:1ⁿ16 2                                  # Minimum 16-bit value
FT ← ⊃(∠°ℂ)(÷FV⌵)↙+1÷2S fft                    # Fourier transform [phase, amp ← wave]
FU ← ◌°ℂ°fft⊂:⍜°ℂ¯↘1⇌↘1.ℂ⊃(×∿)(×CS)⊙(×FV)      # Fourier untransform [wave ← phase, amp]
DS ← |1 ⍥(⊂:"/")>0⧻.                           # Add slash to directory name
CG ← ⍢⊢(=1⧻)≡(⇌⬚1⊞≠⇡GH⁅×-1GH SU U2C)▽=0⇡⌊÷GL O # Create graph
True ← 1                                       # True constant
False ← 0                                      # False constant
R₀ ← ☇0                                        # Rerank zero
R₁ ← ☇1                                        # Rerank one
V! ← R₁≡^!R₀
VV! ← R₁≡^!R₀⊙R₀
VVA! ← R₁≡^!R₀⊙R₀⊙⊙R₁
VA! ← R₁≡^!R₀⊙R₁
VAA! ← R₁≡^!R₀⊙R₁⊙⊙R₁
A! ← R₁≡^!R₁
AA! ← R₁≡^!R₁⊙R₁

# ---- Convolutions
# Identity (delta) convolution
CId ← ¤¤1

# ---- Table values
# Values (linear) [min, max]
Val ← VR⊙⊙(VB)
# Values (power in) [min, max, base]
ValPI ← VR⊙⊙(ⁿ:VB)
# Values (power out) [min, max, base]
ValPO ← ⇌ValPI:

# ---- Helpers
# Random (min-max) [Min, Max]
Rnd ← +×⚂:⟜-
# Random (min-max) [Min, Max]
RndI ← ⌊Rnd:+1:⍥:<,,

# ---- Wave Operations
# Sum [{Waves/Tables}]
Sum ← °□/+⍚R₁
# Average [{Waves/Tables}]
Avg ← Sum÷⊸⧻
# Amplify [Amount, Wave/Table]
Amp ← VA!×
# Maximize [Wave/Table]
Max ← A!(◌⍥⟜÷≠0.↥∩/↥⟜¯.)
# Phase shift [Amount, Wave/Table]
Phs ← VA!(↻⁅×⧻,)
# Phase shift to zero point [Wave/Table]
Zer ← A!(↻⊗/↧⌵..)
# Bitcrush [Amount (0-1), Wave/Table]
Bit ← VA!(US↧1÷-1:⌊×,SU:⁅ⁿ:2+1×15-:1√↧1↥0)
# Reverse [Wave/Table]
Rev ← A!⇌
# Invert [Wave/Table]
Inv ← A!¯
# Mirror 1st half [Wave/Table]
Mir ← A!(⊂⇌.↙÷2S)
# Fade start & end [Amount (0-1), Wave/Table]
Fad ← VA!(⇌⬚1×⇌:⬚1⟜×÷⧻.⇡⌊÷2×S↥0)
# Crossfade [Amount (0-1), Start Wave/Table, End Wave/Table]
Crs ← VAA!(+⊙(×-:1):⟜×⊙:)
# Stretch [To (0-1), From (0-1), Wave/Table]
Str ← VVA!(⊂⊙RI:-:S⟜RI⊙⊃↙↘∩(↧-1S↥1⁅×S↧1↥0))
# Shift up/down [Amount (¯1-1), Wave/Table]
Shf ← VA!(+)
# Slice [Amount (0-1), Wave/Table]
Slc ← VA!(RI S↯♭⁅↥1×S)
# Speed up/down [Octaves, Wave/Table]
Spd ← VA!(Slcⁿ:2)
# Splice [Amount (0-1), Wave/Table 1, Wave/Table 2]
Spl ← VAA!(⊂⊓↙↘⟜:⁅×S↧1↥0)
# Clip
Clp ← A!(C)
# Wrap [Wave/Table]
Wrp ← A!(US◿+MB1SU)
# Amplutude modulation [Amplitude, Modulator, Carrier]
AM ← VAA!(×+1÷2×-1:)
# Ring modulation [Modulator, Carrier]
RM ← AA!×
# Frequency modulation [Amplitude, Modulator, Carrier]
FM ← VAA!(SI×S+OU×)
# Convolve [Impulse, Wave/Table]
Cnv ← AA!(/+×⍉◫⊙(↯♭):-1⊸+⧻,⧻⟜:)
# Phase randomize [Amount (0-1), Wave/Table]
Phr ← ≡(FU:⊙+:FT):≡×R₁-π×τ⍥(⊂⚂)+1÷2S[]R₀⊙R₁
# Harmonic wave filter [Amount (0-1), Filter Wave/Table, Source Wave/Table]
Hwf ← VAA!(FU⊙×:+1×⊙(-1◌∩FT))
# Downsample [Amount (0-1), Wave/Table]
Dwn ← VA!(
  ⌈÷:S.⁅↥1ⁿ:2+1×-1ₙ2S-:1
  ↯¤S⍉↯⟜÷⟜(≡/+↯⊂:)
)

# ---- Table operations
# Comb filter (feedback) [Amplitude, Harmonic, Table]
TCmb ← ↯O_S SM⊙(⬚0↯⊂⌈÷:T.⁅÷:S⊙R)
# Comb filter (feedforward) [Amplitude, Harmonic, Table]
TCmf ← ↯O_S+×⊙(⊂↯:[0]¤⟜↘⌊÷:¯S⊙(.R))

# ---- Waveforms
# Sine wave [Harmonic]
Sin ← V!(∿×:OT)
# Saw wave [Harmonic]
Saw ← V!(US◿1×:OU)
# Triangle wave [Harmonic]
Tri ← V!(US⌵US◿1+0.25¯×:OU)
# Pulse wave [Harmonic, Duty]
Pul ← VV!(US≤US:Saw)
# Square wave [Harmonic]
Sqr ← V!(Pul:0.5)
# Noise wave []
Nsw ← (☇1US⍥(⊂⚂)S[])

# ---- Tables
# Noise table []
Nst ← (⍥(⊂Nsw)O[])

# ---- Settings
Desktop ← False
InDirAudio ← "in"
InDirImage ← "in"
OutDirAudio ← "out"
OutDirImage ← "out"
OutDirGraph ← "out"
OutDirSpectrum ← "out"
OutSuffixImage ← ""
OutSuffixGraph ← "g"
OutSuffixSpectrum ← "s"

# ---- Utility
Print ← &pf
Export ← &ap C♭
Test ← &ap U3R C♭
Graph ← IS CG
Image ← &ims↯O_S SU R C♭
ImportImage ← RI O≡RI S⍜⍉≡(÷3/+↙3)◌°img&frab⍥(⊂DS InDirImage)Desktop
ImportWave ← R₁ RI S◌◌°audio&frab⍥(⊂DS InDirAudio)Desktop
ImportTable ← ↯O_S RI T◌◌°audio&frab⍥(⊂DS InDirAudio)Desktop # Import 256-wave table
TableAverage ← R₁÷O/+↯O_S                                    # Table to wave [Table]
TableIndex ← R₁⊡↧-1O↥0⁅:↯O_S:                                # Table to wave [Index (0-255), Table]
ImageToTable ← US
GraphConv ← Graph A!(⬚0×↯S1)
GraphSpectrum ← IS⍢⊢(=1⧻)≡(⇌⊞≥÷SH⇡SH⊏SV÷FV↙÷2S⌵fft)▽=0⇡⌊÷GL O
GraphSpectrumFull ← IS⍢⊢(=1⧻)≡(⇌⊞≥÷SH⇡SH÷FV⌵fft)▽=0⇡⌊÷GL O
WriteAudio ← &fwa⍥(⊂DS&fmd.OutDirAudio)Desktop⊂⊙(".wav"audio"wav"&asrC♭)
WriteImage ← (
  ⊂⊙(⊂OutSuffixImage".png"img"png"∵[..:1]↯O_S SU R C♭)
  &fwa⍥(⊂DS&fmd.OutDirImage)Desktop)
WriteGraph ← (
  ⍥(⊂DS&fmd.OutDirGraph)Desktop⊂:OutSuffixGraph⊙(>3⧻△.∵[..:1]CG)
  &fwa⨬(⊂:".png"⊙(img"png")|⊂:".gif"⊙(gif16)):
)
WriteSpectrum ← (
  ⊙(⍢⊢(=1⧻)≡(⇌⊞≥÷SH⇡SH⊏SV÷FV↙÷2S⌵fft)▽=0⇡⌊÷GL O)
  ⍥(⊂DS&fmd.OutDirSpectrum)Desktop⊂:OutSuffixSpectrum⊙(>3⧻△.∵[..:1])
  &fwa⨬(⊂:".png"⊙(img"png")|⊂:".gif"⊙(gif16)):
)
WriteSpectrumFull ← (
  ⊙(⍢⊢(=1⧻)≡(⇌⊞≥÷SH⇡SH÷FV⌵fft)▽=0⇡⌊÷GL O)
  ⍥(⊂DS&fmd.OutDirSpectrum)Desktop⊂:OutSuffixSpectrum⊙(>3⧻△.∵[..:1])
  &fwa⨬(⊂:".png"⊙(img"png")|⊂:".gif"⊙(gif16)):
)
Exit ← ⍥(&exit0)Desktop

# ---- Sample waveforms/wavetables
Wave₁ ← Avg{Sin3 Amp0.7Sin2 Sin1}
Wave₂ ← AM0.4Sin7 AM0.5Sin2 Sin1
Wave₂ ← Avg{Saw1 (Pul 2 0.2)}
Wave₄ ← Bit0.7 FM0.1Sin7 Sin1
Tbl₁ ← FM(Val 0 1) Sin2 Sin1
Tbl₂ ← Max Avg{Amp(Val 0 1)Sin2 Sin1}
Tbl₃ ← Bit(Val 0 1) Crs(ValPI 0 1 2) Sin1 Sin3

Print "Tbl₃"
Test Tbl₃
Image Tbl₃
Graph Tbl₃
GraphSpectrum Tbl₃

Exit
